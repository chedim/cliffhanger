/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'com.chedim.cliff.java-library-conventions'
    id 'antlr'
    id 'java'
}

repositories {
  mavenCentral()
  jcenter()
}

dependencies {
  implementation 'org.jetbrains:annotations:20.1.0'
    antlr "org.antlr:antlr4:4.9.2"
  implementation "org.antlr:antlr4-runtime:4.9.2"
  implementation("com.google.guava:guava:31.0.1-jre")
  implementation 'org.slf4j:slf4j-api:1.7.32'
  implementation 'org.slf4j:slf4j-simple:1.7.32'
  implementation "org.apache.commons:commons-lang3:3.12.0"
  implementation 'com.couchbase.client:java-client:3.2.3'
  implementation 'org.reactivestreams:reactive-streams:1.0.3'
  implementation 'org.atteo:evo-inflector:1.2.2'
  testImplementation(platform('org.junit:junit-bom:5.7.0'))
  testImplementation('org.junit.jupiter:junit-jupiter')
}

generateGrammarSource {
  maxHeapSize = "512m"
  arguments += [ '-package', 'com.chedim.cliffhanger.parser', '-no-visitor' ]
}

compileJava.dependsOn generateGrammarSource

sourceSets {
  generated {
    java.srcDir 'generated-src/antlr/main'
  }
}

compileJava.source sourceSets.generated.java, sourceSets.main.java

clean {
  delete "generated-src"
}

test {
  useJUnitPlatform()
  testLogging {
    events "passed", "skipped", "failed"
  }
}
